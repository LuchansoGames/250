function preload(){game.stage.backgroundColor=backgroundColor,game.scale.pageAlignHorizontally=!0,game.scale.pageAlignVertically=!0,game.physics.startSystem(Phaser.Physics.ARCADE),game.load.audio("music",["sounds/music.mp3","sounds/music.ogg"]),game.load.audio("coin",["sounds/coin.wav","sounds/coin.mp3"]),game.load.audio("coin",["sounds/jump.wav","sounds/jump.mp3"]),game.load.image("square","img/square.png"),game.load.image("instruction","img/instruction.png"),game.load.spritesheet("volume","img/volume-spritesheet.png",96,96)}function create(){upKey=game.input.keyboard.addKey(Phaser.Keyboard.W),upKey.onDown.add(up,this),downKey=game.input.keyboard.addKey(Phaser.Keyboard.S),downKey.onDown.add(down,this),leftKey=game.input.keyboard.addKey(Phaser.Keyboard.A),leftKey.onDown.add(left,this),rightKey=game.input.keyboard.addKey(Phaser.Keyboard.D),rightKey.onDown.add(right,this),square=game.add.sprite(0,0,"square"),square.tint=playerColor,square.width=squareSize,square.height=squareSize,square.x=game.world.centerX-25,square.y=game.world.centerY-25,coin=game.add.sprite(0,0,"square"),coin.tint=playerColor,coin.width=coinSize,coin.height=coinSize,coin.anchor.setTo(.5,.5);var e=game.add.tween(coin).to({angle:360},1e3,"Linear",!0);e.repeat(-1,0);var t=game.add.sprite(0,0,"instruction");t.x=game.world.centerX-t.width/2,t.y=game.world.height-t.height-margin,nextEnemy=game.time.now,setTimeout(function(){game.add.tween(t).to({alpha:0},instructionFadeTime).start()},instructionShowTime),addGameName(),addMusic(),addVolumeButton();var a=game.add.graphics(0,0);drawBorder(a)}function update(){game.physics.arcade.overlap(square,coin,takeCoin,null,this),game.physics.arcade.overlap(square,enemies,squareDie,null,this)}function render(){}function drawBorder(e){e.lineStyle(5,1713022),e.drawRect(game.world.centerX-25-80,game.world.centerY-25-80,210,210)}function up(){if(!isMoving){var e,t=square.y-65,a=game.world.centerY-25-65;a>t?(t+=distance,e=game.add.tween(square).to({y:t},37.5).to({y:square.y},37.5).start()):e=game.add.tween(square).to({y:t},squareMoveTime).start(),isMoving=!0,e.onComplete.add(function(){isMoving=!1})}}function down(){if(!isMoving){var e,t=square.y+65,a=game.world.centerY-25+65;t>a?(t-=distance,e=game.add.tween(square).to({y:t},37.5).to({y:square.y},37.5).start()):e=game.add.tween(square).to({y:t},squareMoveTime).start(),isMoving=!0,e.onComplete.add(function(){isMoving=!1})}}function left(){if(!isMoving){var e,t=square.x-65,a=game.world.centerX-25-65;a>t?(t+=distance,e=game.add.tween(square).to({x:t},37.5).to({x:square.x},37.5).start()):e=game.add.tween(square).to({x:t},squareMoveTime).start(),isMoving=!0,e.onComplete.add(function(){isMoving=!1})}}function right(){if(!isMoving){var e,t=square.x+65,a=game.world.centerX-25+65;t>a?(t-=distance,e=game.add.tween(square).to({x:t},37.5).to({x:square.x},37.5).start()):e=game.add.tween(square).to({x:t},squareMoveTime).start(),isMoving=!0,e.onComplete.add(function(){isMoving=!1})}}function addGameName(){var e={font:"32px Arial",fill:"#fff",boundsAlignH:"center",boundsAlignV:"middle"};text=game.add.text(0,0,"250+",e),text.x=game.world.centerX-text.width/2,text.y=game.world.centerY-200}function addMusic(){music=game.add.audio("music"),music.loop=!0,music.volume=0,settings.muted||music.play(),game.add.tween(music).to({volume:1},musicUp).start()}function squareDie(){}function takeCoin(){}function spawnEnemies(){if(!(game.time.now<this.nextEnemy)){var e=1300,t=500,a=40,i=Math.max(e-(e-t)*this.score/a,t);this.nextEnemy=game.time.now+i;var n=[];n[0]=[[{i:-1,j:-1,ver:!0,speed:1}],[{i:-1,j:0,ver:!0,speed:1}],[{i:-1,j:1,ver:!0,speed:1}],[{i:1,j:-1,ver:!0,speed:1}],[{i:1,j:0,ver:!0,speed:1}],[{i:1,j:1,ver:!0,speed:1}],[{i:-1,j:-1,ver:!1,speed:1}],[{i:0,j:-1,ver:!1,speed:1}],[{i:1,j:-1,ver:!1,speed:1}],[{i:-1,j:1,ver:!1,speed:1}],[{i:0,j:1,ver:!1,speed:1}],[{i:1,j:1,ver:!1,speed:1}]];for(var o=n[0][game.rnd.integerInRange(0,n[0].length-1)],s=0;s<o.length;s++)this.addEnemy(o[s].i,o[s].j,o[s].ver,2*o[s].speed)}}function addEnemy(e,t,a,i){var n=this.enemies.getFirstDead();if(n){a?(n.reset(game.width/2+8*e*8+190*e,game.height/2+8*t*8),n.body.velocity.x=-100*e*i):(n.reset(game.width/2+8*e*8,game.height/2+8*t*8+190*t),n.body.velocity.y=-100*t*i),n.anchor.setTo(.5),n.checkWorldBounds=!0,n.outOfBoundsKill=!0}}function takeCoin(){if(!this.coinTaking){this.coinTaking=!0,this.emitter.x=this.coin.x,this.emitter.y=this.coin.y,this.coinSound.play(),this.updateScore();game.add.tween(this.coin.scale).to({x:0,y:0},100).start();game.time.events.add(500,this.addCoin,this)}}function addVolumeButton(){var e=1;settings.muted&&(e=0),soundButton=game.add.button(5,5,"volume",volumeStateChange,this,e,e,e),soundButton.width=48,soundButton.height=48}function volumeStateChange(){0===soundButton.frame?(soundButton.setFrames(1,1,1),music.resume(),settings.muted=!1):1===soundButton.frame&&(soundButton.setFrames(0,0,0),music.pause(),settings.muted=!0),saveSettings(settings)}function saveSettings(e){localStorage.setItem("250-settings",JSON.stringify(e))}function loadSettings(){return JSON.parse(localStorage.getItem("250-settings"))||{muted:!1}}function addCoin(){for(var e=(game.rnd.integerInRange(0,2),game.rnd.integerInRange(0,2),[{x:game.width/2-64,y:game.height/2-64},{x:game.width/2,y:game.height/2-64},{x:game.width/2+64,y:game.height/2-64},{x:game.width/2-64,y:game.height/2},{x:game.width/2,y:game.height/2},{x:game.width/2+64,y:game.height/2},{x:game.width/2-64,y:game.height/2+64},{x:game.width/2,y:game.height/2+64},{x:game.width/2+64,y:game.height/2+64}]),t=0;t<e.length;t++)e[t].x==this.coin.x&&e[t].y==this.coin.y?e.splice(t,1):e[t].x<this.square.x+56&&e[t].x>this.square.x-56&&e[t].y<this.square.y+56&&e[t].y>this.square.y-56&&e.splice(t,1);var a=e[game.rnd.integerInRange(0,e.length-1)];this.coin.reset(a.x,a.y),game.add.tween(this.coin.scale).to({x:1,y:1},100).start(),this.coinTaking=!1}var game=new Phaser.Game(600,900,Phaser.AUTO,"",{preload:preload,create:create,update:update,render:render});const distance=50,margin=15,squareSize=50,coinSize=25,backgroundColor=2635155,playerColor=15662913,enemyColor=16732754,squareMoveTime=75,instructionFadeTime=2e3,instructionShowTime=3e3,musicUp=15e3;var square,coin,isMoving=!1,soundButton,score=0,bestScore=0,nextEnemy,enemies,music,settings=loadSettings(),upKey,downKey,leftKey,rightKey;